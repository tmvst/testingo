// Generated by CoffeeScript 1.6.3
(function() {
  var hide_process, input_template, process_update;

  input_template = function(points, tu) {
    return "<span id=\"x" + tu + "\">\n<a href=\"#\" class=\"update_b pull-right\" id=\"t" + tu + "\"> Uložiť </a>\n<input class=\"form-control-my pull-right\" value=\"" + points + "\" name=\"s" + tu + "\">\n</span>";
  };

  hide_process = function(id, body, max) {
    var tu;
    tu = id.substring(1);
    $("#b" + tu).hide();
    $("#o" + tu).append(input_template(body, tu));
    $("#c" + tu).hide();
    return $("#t" + tu).click(function() {
      return process_update(this.id, post_url, max);
    });
  };

  process_update = function(id, post_url, max) {
    var new_bodyQ, q_id, tu;
    tu = id.substring(1);
    q_id = 's' + tu;
    new_bodyQ = $("input[name='" + q_id + "']").val();
    $.ajax({
      url: post_url,
      type: "POST",
      contentType: "application/json; charset=utf-8",
      data: JSON.stringify({
        points: new_bodyQ,
        id_question: tu,
        nc: 0
      })
    }).done(function(response) {
      $("#x" + tu).hide();
      $("#b" + tu).show();
      $("#c" + tu).show();
      return $("#b" + tu).html(new_bodyQ + " / " + max);
    }).fail(function(response) {
      return console.log(response + "neupdatol som sa");
    });
    return false;
  };

  $(document).ready(function() {
    var ebody, maxp;
    ebody = $(".zbody");
    maxp = $(".zbody").data("points");
    return $(".zbody").click(function() {
      return hide_process(this.id, this.name, maxp);
    });
  });

}).call(this);

/*
//@ sourceMappingURL=edit_points.map
*/
